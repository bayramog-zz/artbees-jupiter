"use strict";var _createClass=function(){function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}}();function _defineProperty(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}!function(d,t){var n=(_createClass(e,[{key:"events",value:function(){function i(){d('[data-toggle="tooltip"]').tooltip(),d('[data-toggle="popover"]').click(function(t){t.preventDefault()}),d('[data-toggle="popover"]').popover({trigger:"focus",container:".jupiterx.jupiterx-modal",html:!0})}d(".jupiterx-setup-wizard-hide-notice").on("click",function(t){t.preventDefault(),d(this).attr("disabled","disabled"),d.ajax({type:"POST",url:_wpUtilSettings.ajax.url,data:{action:"jupiterx_setup_wizard_hide_notice"},beforeSend:function(){d(".jupiterx-setup-wizard-message").fadeOut(400)}})}),d(document).off().on("click","#jupiterx-api-key-switch",function(t){t.preventDefault();var e=d(this),n=d("#jupiterx-modal");"api"===e.data("activation-mode")?(n.find(".jupiterx-purchase-code-mode-element").addClass("d-block").removeClass("d-none"),n.find(".jupiterx-api-mode-element").addClass("d-none").removeClass("d-block d-flex"),n.find("#jupiterx-cp-gdpr-option-wrapper, #jupiterx-cp-mailing-list-option-wrapper").addClass("d-flex").removeClass("d-none"),e.data("activation-mode","purchase-code"),e.text(jupiterx_cp_textdomain.license_manager_add_api)):(n.find(".jupiterx-api-mode-element").addClass("d-block").removeClass("d-none"),n.find(".jupiterx-purchase-code-mode-element").addClass("d-none").removeClass("d-block d-flex"),e.data("activation-mode","api"),e.text(jupiterx_cp_textdomain.license_manager_insert_purchase_code)),i()}),d("#js__regiser-api-key-btn").on("click",function(t){var e;t.preventDefault(),jupiterx_modal((_defineProperty(e={title:jupiterx_cp_textdomain.registering_theme,type:"",cancelButtonText:jupiterx_cp_textdomain.discard,showCancelButton:!0,showConfirmButton:!0,showCloseButton:!0,confirmButtonText:jupiterx_cp_textdomain.submit},"cancelButtonText",jupiterx_cp_textdomain.cancel),_defineProperty(e,"closeOnConfirm",!1),_defineProperty(e,"text",d(wp.template("jupiterx-cp-registration")())),_defineProperty(e,"onConfirm",function(){if("api"===d("#jupiterx-api-key-switch").data("activation-mode")){var t=d("#jupiterx-cp-register-api-input").val();if(0===t.length)return!1;var e={action:"jupiterx_cp_register_revoke_api_action",method:"register",api_key:t,security:d("#security").val()};jupiterx_modal({type:"",title:jupiterx_cp_textdomain.license_manager_registration_title,text:jupiterx_cp_textdomain.wait_for_api_key_registered,cancelButtonText:jupiterx_cp_textdomain.discard,showCancelButton:!1,showConfirmButton:!1,showCloseButton:!1,showLearnmoreButton:!1,showProgress:!0,indefiniteProgress:!0,progress:"100%"}),d.post(_wpUtilSettings.ajax.url,e,function(t){!0===(t=JSON.parse(t)).status&&(t.data||{}).status?(jupiterx_modal({title:jupiterx_cp_textdomain.thanks_registering,text:t.message,type:"success",showCancelButton:!1,showConfirmButton:!0,showCloseButton:!1,showLearnmoreButton:!1,showProgress:!1,indefiniteProgress:!0,closeOnOutsideClick:!1,closeOnConfirm:!1,onConfirm:function(){window.location.reload()}}),d(".jupiterx-wrap").removeClass("jupiterx-call-to-register-product"),d(".get-api-key-form").addClass("d-none"),d(".remove-api-key-form").removeClass("d-none")):jupiterx_modal({title:jupiterx_cp_textdomain.registeration_unsuccessful,text:t.message,type:"error",showCancelButton:!1,showConfirmButton:!0,showCloseButton:!1,showLearnmoreButton:!1,showProgress:!1,onConfirm:function(){d("#jupiterx-cp-register-api-input").val("")}})})}else{var i=d("#jupiterx-cp-register-purchase-code-input").val(),n=d("#jupiterx-cp-register-email").val();if(0===i.length||0===n.length)return!1;if(!d("#jupiterx-cp-register-gdpr").prop("checked"))return d("#jupiterx-cp-register-gdpr").addClass("is-invalid"),!1;d("#jupiterx-cp-register-gdpr").removeClass("is-invalid");var o={action:"jupiterx_register_license",purchase_code:i,nonce:d("#license-manager-nonce").val(),email:d("#jupiterx-cp-register-email").val(),accept_mail_list:d("#jupiterx-cp-register-mailing-list").prop("checked")?"on":"off"};jupiterx_modal({type:"",title:jupiterx_cp_textdomain.license_manager_registration_title,text:jupiterx_cp_textdomain.wait_for_api_key_registered,cancelButtonText:jupiterx_cp_textdomain.discard,showCancelButton:!1,showConfirmButton:!1,showCloseButton:!1,showLearnmoreButton:!1,showProgress:!0,indefiniteProgress:!0,progress:"100%"}),d.post(_wpUtilSettings.ajax.url,o,function(t){if("valid_api"===t.data.code){console.log("Validating API key ...");var e={action:"jupiterx_cp_register_revoke_api_action",method:"register",api_key:i,security:d("#security").val()};d.post(_wpUtilSettings.ajax.url,e,function(t){!0===(t=JSON.parse(t)).status&&(t.data||{}).status?(jupiterx_modal({title:jupiterx_cp_textdomain.thanks_registering,text:t.message,type:"success",showCancelButton:!1,showConfirmButton:!0,showCloseButton:!1,showLearnmoreButton:!1,showProgress:!1,indefiniteProgress:!0,closeOnOutsideClick:!1,closeOnConfirm:!1,onConfirm:function(){window.location.reload()}}),d(".jupiterx-wrap").removeClass("jupiterx-call-to-register-product"),d(".get-api-key-form").addClass("d-none"),d(".remove-api-key-form").removeClass("d-none")):jupiterx_modal({title:jupiterx_cp_textdomain.registeration_unsuccessful,text:t.message,type:"error",showCancelButton:!1,showConfirmButton:!0,showCloseButton:!1,showLearnmoreButton:!1,showProgress:!1,onConfirm:function(){d("#jupiterx-cp-register-api-input").val("")}})})}else if(!0===t.success){var n=t.data||{};n.status?(jupiterx_modal({title:jupiterx_cp_textdomain.thanks_registering,text:n.message,type:"success",showCancelButton:!1,showConfirmButton:!0,showCloseButton:!1,showLearnmoreButton:!1,showProgress:!1,indefiniteProgress:!0,closeOnOutsideClick:!1,closeOnConfirm:!1,onConfirm:function(){window.location.reload()}}),d(".jupiterx-wrap").removeClass("jupiterx-call-to-register-product"),d(".get-api-key-form").addClass("d-none"),d(".remove-api-key-form").removeClass("d-none")):jupiterx_modal({title:jupiterx_cp_textdomain.registeration_unsuccessful,text:t.message,type:"error",showCancelButton:!1,showConfirmButton:!0,showCloseButton:!1,showLearnmoreButton:!1,showProgress:!1,onConfirm:function(){d("#jupiterx-cp-register-api-input").val(""),window.location.reload()}})}else jupiterx_modal({title:jupiterx_cp_textdomain.registeration_unsuccessful,text:t.data.message,type:"error",showCancelButton:!1,showConfirmButton:!0,showCloseButton:!1,showLearnmoreButton:!1,showProgress:!1,onConfirm:function(){d("#jupiterx-cp-register-api-input").val("")}})})}}),e)),i()}),d("#js__revoke-api-key-btn").on("click",function(t){t.preventDefault();var e=d(this).data("revoking-mode")||"api";jupiterx_modal({title:jupiterx_cp_textdomain.revoke_API_key,text:jupiterx_cp_textdomain.you_are_about_to_remove_API_key,type:"warning",showCancelButton:!0,showConfirmButton:!0,showLearnmoreButton:!1,confirmButtonText:jupiterx_cp_textdomain.ok,cancelButtonText:jupiterx_cp_textdomain.cancel,closeOnConfirm:!1,onConfirm:function(){if("api"===e){var t={action:"jupiterx_cp_register_revoke_api_action",method:"revoke",security:d("#security").val()};d.post(_wpUtilSettings.ajax.url,t,function(t){!0===(t=JSON.parse(t)).status&&window.location.reload()})}else t={action:"jupiterx_revoke_license",nonce:d("#license-manager-nonce").val()},jupiterx_modal({type:"",title:jupiterx_cp_textdomain.license_manager_revoking_title,text:jupiterx_cp_textdomain.wait_for_api_key_revoke,cancelButtonText:jupiterx_cp_textdomain.discard,showCancelButton:!1,showConfirmButton:!1,showCloseButton:!1,showLearnmoreButton:!1,showProgress:!0,indefiniteProgress:!0,progress:"100%"}),d.post(_wpUtilSettings.ajax.url,t,function(t){!0===t.success?window.location.reload():jupiterx_modal({title:jupiterx_cp_textdomain.license_manager_revoking_error,text:t.data.message,type:"error",showCancelButton:!1,showConfirmButton:!0,showCloseButton:!1,showLearnmoreButton:!1,showProgress:!1,onConfirm:function(){window.location.reload()}})})}})})}}]),e);function e(){_classCallCheck(this,e),this.events()}var i=(_createClass(o,[{key:"init",value:function(){t.templates&&t.templates.init({customImport:!0}),this.templateInstalled()}},{key:"events",value:function(){var n=this;d(document).on("click","#js__cp_template_uninstall",function(t){t.preventDefault();var e=d(this);jupiterx_modal({title:jupiterx_cp_textdomain.important_notice,text:jupiterx_cp_textdomain.uninstalling_template_will_remove_all_your_contents_and_settings,type:"warning",showCancelButton:!0,showConfirmButton:!0,confirmButtonText:jupiterx_cp_textdomain.yes_uninstall+e.data("title"),showCloseButton:!1,showLearnmoreButton:!1,onConfirm:function(){n.uninstallTemplate()}})}),d(document).on("click","#js__restore-template-btn",function(t){t.preventDefault(),n.restoreBackup()}),d(window).on("template-installed",function(t,e){e.partial||(n.templateInstalled(e.title,e.id),n.restoreButton())})}},{key:"uninstallTemplate",value:function(){jupiterx_modal({title:jupiterx_cp_textdomain.uninstalling_Template,text:jupiterx_cp_textdomain.please_wait_for_few_moments,type:"",showCancelButton:!1,showConfirmButton:!1,showCloseButton:!1,showLearnmoreButton:!1,showProgress:!0,progress:"100%"}),d.post(_wpUtilSettings.ajax.url,{action:"abb_uninstall_template"}).done(function(){d("#js__installed-template-wrap").hide(),jupiterx_modal({title:jupiterx_cp_textdomain.hooray,text:jupiterx_cp_textdomain.template_uninstalled,type:"success",showCancelButton:!1,showConfirmButton:!0,showCloseButton:!1,showLearnmoreButton:!1}),jupiterxTemplates.template=null}).fail(function(t){console.log("Failed msg : ",t)})}},{key:"templateInstalled",value:function(t,e){var n=this,i=d("#js__installed-template");if(i.length&&(t=t||i.data("installed-template"),e=e||i.data("installed-template-id"),!(t<=0&&e<=0))){var o={action:"abb_template_lazy_load",from:0,count:1,template_id:e,template_name:t};d.post(_wpUtilSettings.ajax.url,o,function(t){!0===t.status&&0<t.data.templates.length&&d.each(t.data.templates,function(t,e){d("#js__installed-template-wrap").show(),i.attr("data-installed-template-id",e.id).attr("data-installed-template",e.slug).empty().append(n.templateUI(e))})})}}},{key:"templateUI",value:function(t){return'\n        <div class="jupiterx-cp-template-item">\n          <div class="jupiterx-cp-template-item-inner jupiterx-card">\n            <figure class="jupiterx-cp-template-item-fig">\n              <img src="'+t.img_url+'" alt="'+t.name+'">\n            </figure>\n            <div class="jupiterx-cp-template-item-meta jupiterx-card-body">\n              <h4 class="jupiterx-cp-template-item-name text-truncate" title="'+t.name.replace(" Jupiterx","")+'">'+t.name.replace(" Jupiterx","")+'</h4>\n              <div class="jupiterx-cp-template-item-buttons '+(t.psd_file?" has-psd":"")+'">\n                <a id="js__cp_template_uninstall" class="btn btn-outline-danger mr-2 jupiterx-cp-template-item-btn" href="#" data-title="'+t.name.replace(" Jupiterx","")+'" data-name="'+t.name+'" data-slug="'+t.slug+'" data-id="'+t.id+'">'+jupiterx_cp_textdomain.remove+'</a>\n                <a class="btn btn-outline-secondary mr-2 jupiterx-cp-template-item-btn" href="https://jupiterx.artbees.net/'+t.slug.replace("-jupiterx","")+'" target="_blank">'+jupiterx_cp_textdomain.preview+"</a>\n              </div>\n            </div>\n          </div>\n        </div>\n      "}},{key:"restoreButton",value:function(){d.ajax({type:"POST",url:_wpUtilSettings.ajax.url,data:{action:"abb_is_restore_db"},dataType:"json",success:function(t){var e=t.data,n=[],i="";e.hasOwnProperty("list_of_backups")?null===(n=e.list_of_backups)?console.log("List Of Backups is NULL!"):0===n.length?console.log("List Of Backups is EMPTY!"):(i=e.latest_backup_file.created_date,d("#js__backup-date").text(i),d("#js__restore-template-wrap").addClass("is-active"),console.log("Restore Buttons Created Successfully!")):console.log("No backup files found!")},error:function(t,e,n){console.log("Fail: ",t)}})}},{key:"restoreBackup",value:function(){d.ajax({type:"POST",url:_wpUtilSettings.ajax.url,data:{action:"abb_is_restore_db"},dataType:"json",success:function(t){var e=t.data.latest_backup_file.created_date;jupiterx_modal({title:jupiterx_cp_textdomain.restore_settings,text:"<p>"+jupiterx_cp_textdomain.you_are_trying_to_restore_your_theme_settings_to_this_date+"<strong class='jupiterx-tooltip-restore--created-date'>"+e+"</strong>. "+jupiterx_cp_textdomain.are_you_sure+"</p>",type:"warning",showCancelButton:!0,showConfirmButton:!0,confirmButtonText:jupiterx_cp_textdomain.restore,showCloseButton:!1,showLearnmoreButton:!1,onConfirm:function(){jupiterx_modal({title:jupiterx_cp_textdomain.restoring_database,text:jupiterx_cp_textdomain.please_wait_for_few_moments,type:"",showCancelButton:!1,showConfirmButton:!1,showCloseButton:!1,showLearnmoreButton:!1,progress:"100%",showProgress:!0,indefiniteProgress:!0}),d.ajax({type:"POST",url:_wpUtilSettings.ajax.url,data:{action:"abb_restore_latest_db"},dataType:"json",success:function(t){t.status?jupiterx_modal({title:t.message,text:jupiterx_cp_textdomain.restore_ok,type:"success",showCancelButton:!1,showConfirmButton:!0,showCloseButton:!1,showLearnmoreButton:!1,showProgress:!1,indefiniteProgress:!0,confirmButtonText:jupiterx_cp_textdomain.reload_page,onConfirm:function(){location.reload()}}):jupiterx_modal({title:jupiterx_cp_textdomain.something_went_wrong,text:t.message,type:"error",showCancelButton:!1,showConfirmButton:!0,showLearnmoreButton:!1})},error:function(t,e,n){console.log("Fail: ",t)}})}})},error:function(t,e,n){console.log("Fail: ",t)}})}}]),o);function o(){_classCallCheck(this,o),this.init(),this.events()}var a=(_createClass(s,[{key:"events",value:function(){var n=this;d(".jupiterx-cp-settings-flush").on("click",function(){n.send("flush")}),d(".jupiterx-cp-settings-form").on("submit",function(t){t.preventDefault();var e=d(this),i={};d.map(e.serializeArray(),function(t){var e=t.name,n=t.value;t.name.endsWith("[]")&&(e=e.replace("[]",""),n=i[e]||[],t.value&&n.push(t.value)),i[e]=n}),n.send("save",i)}),d(".jupiterx-image-uploader").each(function(t,e){var n=d(e),i=n.find("input"),o=n.find(".remove-button"),a=wp.media({multiple:!1,title:jupiterx_cp_textdomain.select_zip_file,button:{text:jupiterx_cp_textdomain.select}});a.on("select",function(){var t=a.state().get("selection").first().toJSON();i.val(t.url),n.addClass("has-image")}),n.on("click","input, .upload-button",function(){event.preventDefault(),a.open()}),o.on("click",function(t){t.preventDefault(),i.val(""),n.removeClass("has-image")})}),d("[data-for]").each(function(t,e){var n=d(e),i=d("input[type=checkbox][name="+n.data("for")+"]");i.on("change",function(){n.toggleClass("hidden",!i.is(":checked"))})})}},{key:"send",value:function(t,e){function n(){setTimeout(function(){o.addClass("d-none text-muted").text(a)},3e3)}var i=1<arguments.length&&void 0!==e?e:null,o=d(".jupiterx-cp-settings-"+t+"-feedback"),a=o.text();o.removeClass("d-none"),wp.ajax.send("jupiterx_cp_settings",{data:{nonce:jupiterxControlPanel.nonce,type:t,fields:i},success:function(t){o.removeClass("text-muted").addClass("text-success").text(t),n()},error:function(t){o.removeClass("text-muted").addClass("text-danger").text(t),n()}})}}]),s);function s(){_classCallCheck(this,s),this.events()}var r=(_createClass(u,[{key:"events",value:function(){var i=this;d("#jupiterx-mods-cleanup").on("click",function(t){t.preventDefault();var e=d(this),n={action:"jupiterx_cp_cleanup_mods",nonce:e.attr("data-nonce")};e.replaceWith('\n          <span class="status-state">\n            <span class="jupiterx-cleanup-spinner spinner is-active"></span>\n          </span>\n        '),i.cleanupThemeMods(n)}),d(".jupiterx-button--get-system-report").click(function(){var s="";d("#jupiterx-cp-system-status thead, #jupiterx-cp-system-status tbody").each(function(){var t=d(this);if(t.is("thead")){var e=t.find("th:eq(0)").data("export-label")||t.text();s=s+"\n### "+d.trim(e)+" ###\n\n"}else d("tr",t).each(function(){var t=d(this),e=t.find("td:eq(0)").data("export-label")||t.find("td:eq(0)").text(),n=d.trim(e).replace(/(<([^>]+)>)/gi,""),i=d.trim(t.find("td:eq(2)").text().replace(/(\r\n\t|\n|\r|\t)/gm,"")),o=i.split(", ");if(1<o.length){var a="";d.each(o,function(t,e){a=a+e+"\n"}),i=a}s=s+""+n+": "+i+"\n"})});try{return d("#jupiterx-textarea--get-system-report").slideDown(),d("#jupiterx-textarea--get-system-report textarea").val(s).focus().select(),!1}catch(t){console.log(t)}return!1}),d("[data-jupiterx-ajax]").each(function(){var t=d(this),e=t.data("jupiterxAjax"),n=t.find(".status-state"),i=t.find(".status-text");wp.ajax.send("jupiterx_cp_system_status",{data:{nonce:jupiterxControlPanel.nonce,type:e},success:function(){n.html('<span class="status-invisible">True</span><span class="status-state status-true"></span>')},error:function(t){n.html('<span class="status-invisible">False</span><span class="status-state status-false"></span>'),i.html(t)}})})}},{key:"cleanupThemeMods",value:function(e){var n=this;d.post(_wpUtilSettings.ajax.url,e,function(t){t.success?n.cleanupThemeMods(e):d(".jupiterx-cleanup-spinner").replaceWith('\n            <span class="status-state">\n              <span class="status-invisible">True</span>\n              <span class="status-state status-true"></span>\n            </span>\n          ')})}}]),u);function u(){_classCallCheck(this,u),this.events()}var l=(_createClass(p,[{key:"events",value:function(){d(document).on("click",".js__cp_change_theme_version",this.updateTheme),d(document).on("click",".release-download",this.releaseDownload)}},{key:"releaseDownload",value:function(t){t.preventDefault(),t.stopPropagation();var e=d(this);if("active"===(e.attr("status")||"active")){var n=e.data("release-id"),i=e.data("release-package"),o=e.data("nonce");e.attr("status","deactive"),setTimeout(function(){e.attr("status","active")},9e3),jQuery.ajax({url:_wpUtilSettings.ajax.url,type:"POST",data:{security:o,release_id:n,release_package:i,action:"jupiterx_get_theme_release_package_url"},success:function(t){t.success&&(top.location.href=t.data)},error:function(t){console.log(t),alert("An error occurred.")}})}}},{key:"updateTheme",value:function(t){t.preventDefault();var e=d(this),i=e.data("release-id"),o=e.data("release-version"),a=e.data("nonce"),s=e.siblings(".jupiterx-cp-update-feedback");jupiterx_modal({title:jupiterx_cp_textdomain.please_note,text:jupiterx_cp_textdomain.any_customisation_you_have_made_to_theme_files_will_be_lost,type:"warning",showCancelButton:!0,showConfirmButton:!0,confirmButtonText:jupiterx_cp_textdomain.agree,cancelButtonText:jupiterx_cp_textdomain.discard,learnmoreTarget:"_blank",learnmoreLabel:"Read More",learnmoreButton:"https://intercom.help/artbees?q=Update+jupiter+x",showCloseButton:!0,showLearnmoreButton:!0,onConfirm:function(){var n=[{text:jupiterx_cp_textdomain.apikey_domain_match_error,helpLink:'<a href="https://themes.artbees.net/docs/updating-jupiter-x-theme-automatically/" target="_blank">'+jupiterx_cp_textdomain.learn_more+"</a>"}];s.removeClass("d-none"),e.addClass("disabled loading"),wp.ajax.send("jupiterx_modify_auto_update",{data:{security:a,release_id:i,release_version:o},success:function(){wp.updates.ajax("update-theme",{slug:"jupiterx",success:function(){s.removeClass("text-muted").addClass("text-success").text(jupiterx_cp_textdomain.theme_update_success),e.removeClass("disabled loading"),window.location.reload()},error:function(){s.removeClass("text-muted").addClass("text-danger").text(jupiterx_cp_textdomain.theme_update_failed),e.removeClass("disabled loading")}})},error:function(t){e.removeClass("disabled loading"),s.removeClass("text-muted").addClass("text-danger").html(t+" "+function(t){var e=_.findWhere(n,{text:t});return e?e.helpLink:""}(t))}})}})}}]),p);function p(){_classCallCheck(this,p),this.events()}var c=(_createClass(m,[{key:"events",value:function(){var e=this;d(".js__cp-clist-add-item").on("click",function(t){t.preventDefault(),e.add()}),d(".js__cp-clist-edit-item").on("click",function(t){t.preventDefault(),e.edit(d(this))}),d(".js__cp-clist-remove-item").on("click",function(t){t.preventDefault(),e.remove(d(this))}),d(document).on("blur",'.js__add-new-image-size input[type="number"]',function(t){var e=new Number(t.target.value);(isNaN(e)||e<parseInt(t.target.min))&&d(this).val("")})}},{key:"add",value:function(){var t=this,e="";e+='<div class="jupiterx-modal-header">',e+='<span class="jupiterx-modal-icon"></span>',e+='<h3 class="jupiterx-modal-title">'+jupiterx_cp_textdomain.add_image_size+"</h3>",e+="</div>",e+='<div class="jupiterx-modal-desc">',e+='<div class="form-group mb-3">',e+="<label><strong>"+jupiterx_cp_textdomain.image_size_name+"</strong></label>",e+='<input class="jupiterx-form-control" name="size_n" type="text" required />',e+="</div>",e+='<div class="form-row">',e+='<div class="form-group col-md-6">',e+="<label><strong>"+jupiterx_cp_textdomain.image_size_width+"</strong></label>",e+='<input class="jupiterx-form-control" min="1" name="size_w" step="1" type="number" required />',e+="</div>",e+='<div class="form-group col-md-6">',e+="<label><strong>"+jupiterx_cp_textdomain.image_size_height+"</strong></label>",e+='<input class="jupiterx-form-control" min="1" name="size_h" id="size_h" step="1" type="number" required />',e+="</div>",e+="</div>",e+='<div class="custom-control custom-checkbox form-group mb-3">',e+='<input type="checkbox" class="custom-control-input" id="size_c" name="size_c" checked="checked">',e+='<label class="custom-control-label" for="size_c"><strong>'+jupiterx_cp_textdomain.image_size_crop+"</strong></label>",e+="</div>",e+="</div>";var n=jupiterx_modal({modalCustomClass:"js__add-new-image-size",type:"warning",html:d(e),showCloseButton:!0,showConfirmButton:!0,showCancelButton:!0,closeOnOutsideClick:!0,closeOnConfirm:!1,confirmButtonText:jupiterx_cp_textdomain.save,cancelButtonText:jupiterx_cp_textdomain.discard,onConfirm:function(){t.apply(!1,n)}})}},{key:"edit",value:function(t){var e=this,n=t,i=n.closest(".js__cp-image-size-item"),o=n.closest(".jupiterx-card-body"),a=o.find("[name=size_n]").val(),s=o.find("[name=size_w]").val(),r=o.find("[name=size_h]").val(),u=o.find("[name=size_c]").val();u="on"===u&&'checked="checked"';var l="";l+='<div class="jupiterx-modal-header">',l+='<span class="jupiterx-modal-icon"></span>',l+='<h3 class="jupiterx-modal-title">'+jupiterx_cp_textdomain.edit_image_size+"</h3>",l+="</div>",l+='<div class="jupiterx-modal-desc">',l+='<div class="form-group mb-3">',l+="<label><strong>"+jupiterx_cp_textdomain.image_size_name+"</strong></label>",l+='<input class="jupiterx-form-control" name="size_n" type="text" value="'+a+'" required />',l+="</div>",l+='<div class="form-row">',l+='<div class="form-group col-md-6">',l+="<label><strong>"+jupiterx_cp_textdomain.image_size_width+"</strong></label>",l+='<input class="jupiterx-form-control" min="1" name="size_w" step="1" type="number"  value="'+s+'" required />',l+="</div>",l+='<div class="form-group col-md-6">',l+="<label><strong>"+jupiterx_cp_textdomain.image_size_height+"</strong></label>",l+='<input class="jupiterx-form-control" min="1" name="size_h" id="size_h" step="1" type="number"  value="'+r+'" required />',l+="</div>",l+="</div>",l+='<div class="custom-control custom-checkbox form-group mb-3">',l+='<input type="checkbox" class="custom-control-input" id="size_c" name="size_c" '+u+">",l+='<label class="custom-control-label" for="size_c"><strong>'+jupiterx_cp_textdomain.image_size_crop+"</strong></label>",l+="</div>",l+="</div>";var p=jupiterx_modal({modalCustomClass:"js__add-new-image-size",type:"warning",html:d(l),showCloseButton:!0,showConfirmButton:!0,showCancelButton:!0,closeOnOutsideClick:!0,closeOnConfirm:!1,confirmButtonText:jupiterx_cp_textdomain.save,cancelButtonText:jupiterx_cp_textdomain.discard,onConfirm:function(){e.apply(i,p)}})}},{key:"remove",value:function(t){var e=this,n=t;jupiterx_modal({title:jupiterx_cp_textdomain.remove_image_size,text:jupiterx_cp_textdomain.are_you_sure_remove_image_size,type:"warning",showCancelButton:!0,showConfirmButton:!0,showCloseButton:!1,showLearnmoreButton:!1,onConfirm:function(){n.closest(".jupiterx-img-size-item").remove(),e.save()}})}},{key:"apply",value:function(t,e){var n="",i=d(".js__add-new-image-size"),o=i.find("[name=size_n]"),a=i.find("[name=size_w]"),s=i.find("[name=size_h]"),r=i.find("[name=size_n]").val(),u=i.find("[name=size_w]").val(),l=i.find("[name=size_h]").val(),p=i.find("[name=size_c]:checked").val(),c="on"==(p="on"==p?"on":"off")?"status-true":"status-false";""!=r?(o.removeClass("is-invalid"),""!=u?(a.removeClass("is-invalid"),""!=l?(s.removeClass("is-invalid"),n+='<div class="jupiterx-img-size-item js__cp-image-size-item">',n+='<div class="jupiterx-img-size-item-inner jupiterx-card">',n+='<div class="jupiterx-card-body fetch-input-data">',n+='<div class="js__size-name mb-3"><strong>'+jupiterx_cp_textdomain.size_name+":</strong> "+r+"</div>",n+='<div class="js__size-dimension mb-3"><strong>'+jupiterx_cp_textdomain.image_size+":</strong> "+u+"px "+l+"px</div>",n+='<div class="js__size-crop mb-3"><strong>'+jupiterx_cp_textdomain.crop+':</strong><span class="status-state '+c+'"></span></div>',n+='<button type="button" class="btn btn-outline-success js__cp-clist-edit-item mr-1">'+jupiterx_cp_textdomain.edit+"</button>",n+='<button type="button" class="btn btn-outline-danger js__cp-clist-remove-item">'+jupiterx_cp_textdomain.remove+"</button>",n+='<input name="size_n" type="hidden" value="'+r+'" />',n+='<input name="size_w" type="hidden" value="'+u+'" />',n+='<input name="size_h" type="hidden" value="'+l+'" />',n+='<input name="size_c" type="hidden" value="'+p+'" />',n+="</div>",n+="</div>",0<t.length?(t.after(n),t.remove()):d(".js__jupiterx-img-size-list").append(n),e.close(),this.events(),this.save()):s.addClass("is-invalid")):a.addClass("is-invalid")):o.addClass("is-invalid")}},{key:"save",value:function(){var t=d(".js__jupiterx-img-size-list"),e=[];t.find(".js__cp-image-size-item").each(function(){e.push(d(this).find(".fetch-input-data input").serialize())});var n=jupiterx_modal({title:jupiterx_cp_textdomain.saving_image_size,text:jupiterx_cp_textdomain.wait_for_image_size_update,type:"",showCancelButton:!1,showConfirmButton:!1,showCloseButton:!1,showLearnmoreButton:!1,progress:"100%",showProgress:!0,indefiniteProgress:!0});jQuery.ajax({url:_wpUtilSettings.ajax.url,type:"POST",data:{action:"jupiterx_save_image_sizes",options:e,security:d("#security").val()},success:function(t){n.close(),1!=t&&jupiterx_modal({title:jupiterx_cp_textdomain.something_went_wrong,text:jupiterx_cp_textdomain.image_sizes_could_not_be_stored,type:"error",showCancelButton:!1,showConfirmButton:!0,showCloseButton:!1,showLearnmoreButton:!1})},error:function(t){console.log(t),jupiterx_modal({type:"error",title:jupiterx_cp_textdomain.error,text:t+" "+jupiterx_cp_textdomain.issue_persists,showCancelButton:!1,showConfirmButton:!0,showCloseButton:!1,showLearnmoreButton:!1,showProgress:!1,closeOnConfirm:!1,confirmButtonText:jupiterx_cp_textdomain.try_again,closeOnOutsideClick:!1,onConfirm:function(){window.location.reload()}})}})}}]),m);function m(){_classCallCheck(this,m),this.events()}var x=(_createClass(g,[{key:"events",value:function(){var e=this;d(".jupiterx-cp-export-form").on("submit",function(t){t.preventDefault(),e.export(d(this))}),d(".jupiterx-cp-import-btn").on("click",function(t){t.preventDefault(),e.import()}),d(".jupiterx-cp-import-upload-btn").on("click",function(t){t.preventDefault(),e.upload(t)})}},{key:"export",value:function(t){var e=this;e.steps=[],e.modal="",e.cancel="";var n=t.serializeArray();e.data.filename=n[0].value,n=_.reject(n,function(t){return"filename"==t.name}),e._mapOptions(n)&&(e.modal=jupiterx_modal({type:!1,title:jupiterx_cp_textdomain.exporting+' <span class="cp-export-step">'+e.steps[1]+"</span>...",text:jupiterx_cp_textdomain.export_waiting,showCancelButton:!0,showConfirmButton:!1,showCloseButton:!1,showLearnmoreButton:!1,showProgress:!0,progress:"100%",indefiniteProgress:!0,cancelButtonText:jupiterx_cp_textdomain.discard,closeOnConfirm:!1,closeOnOutsideClick:!1,onCancel:function(){e.steps=[],e.cancel=!0,e.send("Export","Discard"),e.modal.close()}}),e.send("Export",_.first(e.steps)))}},{key:"import",value:function(){var e=this;e.steps=[],e.modal="",e.cancel="";var t=d(".jupiterx-cp-import-wrap .jupiterx-form-control").data("id");if(void 0===t)return!1;e.attachmentId=t,e.modal=jupiterx_modal({type:!1,title:"Import",text:"\n          "+jupiterx_cp_textdomain.import_select_options+'\n          <form class="jupiterx-cp-import-form">\n            <label>\n              <input type="checkbox" name="check" value="Content" checked>\n              '+jupiterx_cp_textdomain.site_content+'\n            </label>\n            <label>\n              <input type="checkbox" name="check" value="Widgets" checked>\n              '+jupiterx_cp_textdomain.widgets+'\n            </label>\n            <label>\n              <input type="checkbox" name="check" value="Settings" checked>\n              '+jupiterx_cp_textdomain.settings+"\n            </label>\n          </form>\n        ",showCancelButton:!1,showConfirmButton:!0,showCloseButton:!0,showLearnmoreButton:!1,showProgress:!1,closeOnConfirm:!1,confirmButtonText:jupiterx_cp_textdomain.import,onConfirm:function(){var t=d(".jupiterx-cp-import-form").serializeArray();e._mapOptions(t)&&(jupiterx_modal({type:!1,title:jupiterx_cp_textdomain.importing+' <span class="cp-export-step">'+e.steps[1]+"</span>...",text:jupiterx_cp_textdomain.import_waiting,showCancelButton:!0,showConfirmButton:!1,showCloseButton:!1,showLearnmoreButton:!1,progress:"100%",showProgress:!0,indefiniteProgress:!0,cancelButtonText:jupiterx_cp_textdomain.discard,closeOnOutsideClick:!1,closeOnConfirm:!1,onCancel:function(){e.steps=[],e.cancel=!0,e.send("Import","Discard"),e.modal.close()}}),e.send("Import",_.first(e.steps)))}})}},{key:"upload",value:function(t){var e=void 0,n=d(t.target).parents(".jupiterx-upload-wrap").find("input");e||(e=wp.media({multiple:!1,title:jupiterx_cp_textdomain.select_zip_file,button:{text:jupiterx_cp_textdomain.select}})).on("select",function(){var t=e.state().get("selection").first().toJSON();n.attr("data-id",t.id),n.val(t.url)}),e.open()}},{key:"send",value:function(i,t){var o=this;wp.ajax.send("jupiterx_cp_export_import",{data:{nonce:jupiterxControlPanel.nonce,type:i,step:t,attachment_id:o.attachmentId,data:o.data},success:function(t){o.steps=_.without(o.steps,t.step);var e=_.first(o.steps);if(o.steps.length)"Start"!==t.step&&d(".cp-export-step").text(t.step),o.send(i,e);else{if(!0===o.cancel)return;var n="Export"===i?jupiterx_cp_textdomain.download:jupiterx_cp_textdomain.close;jupiterx_modal({type:"success",title:i+" "+jupiterx_cp_textdomain.done,text:i+" "+jupiterx_cp_textdomain.successfully_finished,showCancelButton:!1,showConfirmButton:!0,showCloseButton:!1,showLearnmoreButton:!1,showProgress:!1,closeOnConfirm:!1,confirmButtonText:n,onConfirm:function(){"Export"===i&&(window.location.href=t.download_url),o.modal.close()}})}},error:function(t){console.log(t),jupiterx_modal({type:"error",title:jupiterx_cp_textdomain.error,text:t+" "+jupiterx_cp_textdomain.issue_persists,showCancelButton:!1,showConfirmButton:!0,showCloseButton:!1,showLearnmoreButton:!1,showProgress:!1,closeOnConfirm:!1,confirmButtonText:jupiterx_cp_textdomain.try_again,onConfirm:function(){window.location.reload(),o.modal.close()}})}})}},{key:"_mapOptions",value:function(t){var e=this;return _.map(t,function(t){return e.steps.push(t.value)}),!!e.steps.length&&(e.steps.unshift("Start"),e.steps.push("End"),!0)}}]),g);function g(){_classCallCheck(this,g),this.steps=[],this.modal="",this.cancel="",this.data={},this.attachmentId="",this.events()}var f=(_createClass(h,[{key:"init",value:function(){var e=this;e.getPluginsList(),d(document).on("click",".abb_plugin_activate",function(t){t.preventDefault(),e.activateInit(d(this))}),d(document).on("click",".abb_plugin_install",function(t){t.preventDefault(),e.installInit(d(this))}),d(document).on("click",".abb_plugin_deactivate",function(t){t.preventDefault(),e.deactivateInit(d(this))}),d(document).on("click",".abb_plugin_delete",function(t){t.preventDefault(),e.deleteInit(d(this))}),d(document).on("click",".abb_plugin_update",function(t){t.preventDefault(),e.updateInit(d(this))}),d(document).on("click",".jupiterx-cp-plugins-filter > .btn",function(t){t.preventDefault(),e.filtersInit(d(this))})}},{key:"getPluginsList",value:function(){var n=this;d.post(_wpUtilSettings.ajax.url,{action:"abb_get_plugins"},function(t){if(d("#js__jupiterx-plugins").html(""),(n.pluginList=t).hasOwnProperty("limit")&&d("#js__jupiterx-plugins").attr("data-plugins-limit",t.limit),d.each(t.plugins,function(t,e){d("#js__jupiterx-plugins").append(n.getPluginsTemplate(e))}),d(".jupiterx-cp-plugins-filter > .btn").prop("disabled",""),"undefined"!=typeof localStorage){var e=localStorage.getItem("activeFilter");d(".jupiterx-cp-plugins-filter > .btn[data-filter="+e+"]").trigger("click")}})}},{key:"getPluginsTemplate",value:function(t){var e=this.getPluginActionBtns(t),n=!0===t.active?"active":"inactive",i=!0===t.update_needed&&t.installed?"yes":"no",o=t.installed?"":"jupiterx-icon-cloud";return'\n        <div class="jupiterx-cp-plugin-item" data-filter="'+n+'" data-update="'+i+'">\n          <div class="jupiterx-cp-plugin-item-inner jupiterx-card">\n            '+(t.pro?'<img class="jupiterx-pro-badge" src="'+jupiterxControlPanel.proBadgeUrl+'" />':"")+'\n            <div class="jupiterx-card-body">\n              <figure class="jupiterx-cp-plugin-item-thumb '+o+'">\n                <img src="'+t.img_url+'">\n              </figure>\n              <div class="jupiterx-cp-plugin-meta-wrapper">\n                <span class="jupiterx-cp-plugin-item-version">\n                  v<span class="item-version-tag">'+t.version+'</span>\n                </span>\n              </div>\n              <div class="jupiterx-cp-plugin-item-meta">\n                <div class="jupiterx-cp-plugin-item-name">'+t.name+'</div>\n                <div class="jupiterx-cp-plugin-item-desc">\n                  '+t.desc+"\n                  "+(t.more_link?'<a href="'+t.more_link+'" target="_blank">Learn More</a>':"")+"\n                </div>\n              </div>\n              "+e+"\n            </div>\n          </div>\n        </div>\n      "}},{key:"getPluginActionBtns",value:function(t){var e=this,n=document.body.classList.contains("multisite");if(!t.installed){if(t.pro)return e.getProBtn();var i=t.install_disabled?"disabled":"";return e.getInstallBtn(t.slug,t.name,t.url,i)}if(t.network_active)return e.getNetworkActiveLabel();var o="";return!0===t.active?o+=e.getDeactivateBtn(t.slug,t.name,t.basename):(o+=e.getActivateBtn(t.slug,t.name,t.url),n||(o+=e.getDeleteBtn(t.slug,t.name,t.basename))),!0!==t.update_needed||n||(o+=e.getUpdateBtn(t.slug,t.name,t.basename)),o}},{key:"getProBtn",value:function(){return'\n        <a class="btn btn-sm jupiterx-btn-upgrade-pro jupiterx-icon-pro" href="'+jupiterx_cp_textdomain.upgrade_url+'" target="_blank">\n          '+jupiterx_cp_textdomain.upgrade+"\n        </a>\n      "}},{key:"getNetworkActiveLabel",value:function(){return'\n        <span class="btn btn-sm network-active" href="#">\n          '+jupiterx_cp_textdomain.network_active+"\n        </span>\n      "}},{key:"getInstallBtn",value:function(t,e,n,i){return'\n        <a class="btn btn-sm btn-outline-success jupiterx-icon-plus-circle-solid abb_plugin_install '+i+'" data-slug="'+t+'" href="'+n+'" data-name="'+e+'">\n          '+jupiterx_cp_textdomain.add+"\n        </a>\n      "}},{key:"getUpdateBtn",value:function(t,e,n){return'\n        <a class="btn btn-sm btn-outline-primary abb_plugin_update" data-basename="'+n+'" data-slug="'+t+'" href="#" data-name="'+e+'">\n          '+jupiterx_cp_textdomain.update+"\n        </a>\n      "}},{key:"getDeleteBtn",value:function(t,e,n){return'\n        <a class="btn btn-sm btn-outline-danger jupiterx-icon-times-circle abb_plugin_delete" data-basename="'+n+'" data-slug="'+t+'" href="#" data-name="'+e+'">\n          '+jupiterx_cp_textdomain.delete+"\n        </a>\n      "}},{key:"getActivateBtn",value:function(t,e,n){return'\n        <a class="btn btn-sm btn-primary abb_plugin_activate" data-slug="'+t+'" href="'+n+'" data-name="'+e+'" data-limit="'+this.getActivationLimit(t)+'">\n          '+jupiterx_cp_textdomain.activate+"\n        </a>\n      "}},{key:"getDeactivateBtn",value:function(t,e,n){return'\n        <a class="btn btn-sm btn-danger abb_plugin_deactivate" data-basename="'+n+'" data-slug="'+t+'" href="#" data-name="'+e+'">\n          '+jupiterx_cp_textdomain.deactivate+"\n        </a>\n      "}},{key:"getActivationLimit",value:function(t){var e=d("#js__jupiterx-plugins").data("plugins-limit").split(",");return-1<e.indexOf("num")||-1<["layerslider","masterslider","revslider"].indexOf(t)&&-1<e.indexOf("sliders")||-1<["jet-blog","jet-elements","jet-engine","jet-menu","jet-popup","jet-smart-filters","jet-tabs","jet-tricks","jet-woo-builder"].indexOf(t)&&-1<e.indexOf("jet-plugins")}},{key:"installInit",value:function(t){var e=this,n=t,i=n.data("name"),o=n.data("slug"),a=n.attr("href");jupiterx_modal({title:jupiterx_cp_textdomain.install_plugin,text:e.language(jupiterx_cp_textdomain.you_are_about_to_install,[i]),type:"warning",showCancelButton:!0,showConfirmButton:!0,confirmButtonText:jupiterx_cp_textdomain.continue,showCloseButton:!1,showLearnmoreButton:!1,showProgress:!1,closeOnOutsideClick:!1,onConfirm:function(){e.installStart(o,i,a)}})}},{key:"installStart",value:function(t,e,n){var i=this;jupiterx_modal({title:jupiterx_cp_textdomain.installing_plugin,text:jupiterx_cp_textdomain.wait_for_plugin_install,type:"",showCancelButton:!1,showConfirmButton:!1,showCloseButton:!1,showLearnmoreButton:!1,progress:"100%",showProgress:!0,indefiniteProgress:!0,closeOnOutsideClick:!1}),d.get({url:n,success:function(t){d(t).find("p:contains(Plugin installed successfully.)").length||d(t).find("p:contains(Successfully installed the plugin)").length?jupiterx_modal({title:jupiterx_cp_textdomain.plugin_is_successfully_installed,text:i.language(jupiterx_cp_textdomain.plugin_installed_successfully_message,[e]),type:"success",showCancelButton:!1,showConfirmButton:!0,showCloseButton:!1,showLearnmoreButton:!1,showProgress:!1,onConfirm:function(){location.reload()}}):jupiterx_modal({title:jupiterx_cp_textdomain.something_went_wrong,text:jupiterx_cp_textdomain.something_wierd_happened_please_try_again,type:"error",showCancelButton:!1,showConfirmButton:!0,showLearnmoreButton:!1,onConfirm:function(){location.reload()}})},error:function(t,e,n){i.request_error_handling(t,e,n)}})}},{key:"activateInit",value:function(t){var e=this,n=t,i=n.data("slug"),o=n.data("name"),a=n.attr("href");jupiterx_modal({title:jupiterx_cp_textdomain.activating_notice,text:e.language(jupiterx_cp_textdomain.are_you_sure_you_want_to_activate,[n.data("name")]),type:"warning",showCancelButton:!0,showConfirmButton:!0,confirmButtonText:jupiterx_cp_textdomain.continue,showCloseButton:!1,showLearnmoreButton:!1,showProgress:!1,closeOnOutsideClick:!1,onConfirm:function(){!0===n.data("limit")?jupiterx_modal({title:jupiterx_cp_textdomain.plugin_limit_warning,text:jupiterx_cp_textdomain.plugin_limit_warning_message+'<a href="https://help.artbees.net/maintenance/why-should-i-keep-my-active-plugins-at-minimum" target="_blank" class="jupiterx-modal-learn-more jupiterx-icon-question-circle" title="'+jupiterx_cp_textdomain.learn_more+'">'+jupiterx_cp_textdomain.learn_more+"</a>",type:"warning",showCancelButton:!0,showConfirmButton:!0,confirmButtonText:jupiterx_cp_textdomain.continue,showCloseButton:!1,showLearnmoreButton:!1,showProgress:!1,closeOnOutsideClick:!1,onConfirm:function(){e.activateStart(i,o,a)}}):e.activateStart(i,o,a)}})}},{key:"activateStart",value:function(e,n,i){var o=this,a=d('.abb_plugin_activate[data-slug="'+e+'"]');jupiterx_modal({title:jupiterx_cp_textdomain.activating_plugin,text:jupiterx_cp_textdomain.wait_for_plugin_activation,type:"",showCancelButton:!1,showConfirmButton:!1,showCloseButton:!1,showLearnmoreButton:!1,progress:"100%",showProgress:!0,indefiniteProgress:!0,closeOnOutsideClick:!1}),d.get({url:i,success:function(t){d(t).find("#message.updated").length?(a.closest(".jupiterx-cp-plugin-item").attr("data-filter","active"),a.siblings(".abb_plugin_delete").remove(),a.replaceWith(o.getDeactivateBtn(e,n,i)),jupiterx_modal({title:jupiterx_cp_textdomain.all_done,text:o.language(jupiterx_cp_textdomain.item_is_successfully_activated,[n]),type:"success",showCancelButton:!1,showConfirmButton:!0,showCloseButton:!1,showLearnmoreButton:!1,showProgress:!1,indefiniteProgress:!0,closeOnOutsideClick:!1,onConfirm:function(){location.reload()}})):jupiterx_modal({title:jupiterx_cp_textdomain.something_went_wrong,text:jupiterx_cp_textdomain.something_wierd_happened_please_try_again,type:"error",showCancelButton:!1,showConfirmButton:!0,showLearnmoreButton:!1,onConfirm:function(){location.reload()}})},error:function(t,e,n){o.request_error_handling(t,e,n)}})}},{key:"deactivateInit",value:function(t){var e=this,n=t;jupiterx_modal({title:jupiterx_cp_textdomain.important_notice,text:e.language(jupiterx_cp_textdomain.are_you_sure_you_want_to_deactivate,[n.data("name")]),type:"warning",showCancelButton:!0,showConfirmButton:!0,confirmButtonText:jupiterx_cp_textdomain.continue,showCloseButton:!1,showLearnmoreButton:!1,showProgress:!1,closeOnOutsideClick:!1,onConfirm:function(){e.deactivateStart(n.data("slug"))}})}},{key:"deactivateStart",value:function(t){var i=this,e=d('.abb_plugin_deactivate[data-slug="'+t+'"]'),n={action:"abb_deactivate_plugin",slug:t};jupiterx_modal({title:jupiterx_cp_textdomain.deactivating_plugin,text:jupiterx_cp_textdomain.wait_for_plugin_deactivation,type:"",showCancelButton:!1,showConfirmButton:!1,showCloseButton:!1,showLearnmoreButton:!1,progress:"100%",showProgress:!0,indefiniteProgress:!0}),d.post({url:_wpUtilSettings.ajax.url,data:n,success:function(t){t.success?(e.closest(".jupiterx-cp-plugin-item").attr("data-filter","inactive"),jupiterx_modal({title:jupiterx_cp_textdomain.deactivating_notice,text:i.language(jupiterx_cp_textdomain.plugin_deactivate_successfully,[]),type:"success",showCancelButton:!1,showConfirmButton:!0,showCloseButton:!1,showLearnmoreButton:!1,showProgress:!1,indefiniteProgress:!1,closeOnOutsideClick:!1,onConfirm:function(){location.reload()}})):jupiterx_modal({title:jupiterx_cp_textdomain.something_went_wrong,text:jupiterx_cp_textdomain.something_wierd_happened_please_try_again,type:"error",showCancelButton:!1,showConfirmButton:!0,showLearnmoreButton:!1,onConfirm:function(){location.reload()}})},error:function(t,e,n){i.request_error_handling(t,e,n)}})}},{key:"deleteInit",value:function(t){var e=this,n=t;jupiterx_modal({title:jupiterx_cp_textdomain.delete_plugin,text:e.language(jupiterx_cp_textdomain.you_are_about_to_delete,[n.data("name")]),type:"warning",showCancelButton:!0,showConfirmButton:!0,confirmButtonText:jupiterx_cp_textdomain.continue,showCloseButton:!1,showLearnmoreButton:!1,showProgress:!1,closeOnOutsideClick:!1,onConfirm:function(){e.deleteStart(n.data("slug"))}})}},{key:"deleteStart",value:function(t){var e=this,n=d('.abb_plugin_delete[data-slug="'+t+'"]'),i=n.data("name");jupiterx_modal({title:jupiterx_cp_textdomain.delete_plugin,text:jupiterx_cp_textdomain.wait_for_plugin_delete,type:"",showCancelButton:!1,showConfirmButton:!1,showCloseButton:!1,showLearnmoreButton:!1,progress:"100%",showProgress:!0,indefiniteProgress:!0}),wp.updates.ajax("delete-plugin",{plugin:n.data("basename"),slug:t,success:function(){jupiterx_modal({title:jupiterx_cp_textdomain.plugin_is_successfully_deleted,text:e.language(jupiterx_cp_textdomain.plugin_deleted_successfully_message,[i]),type:"success",showCancelButton:!1,showConfirmButton:!0,showCloseButton:!1,showLearnmoreButton:!1,showProgress:!1,closeOnOutsideClick:!1,onConfirm:function(){location.reload()}})},error:function(t){jupiterx_modal({title:jupiterx_cp_textdomain.something_went_wrong,text:t.errorMessage,type:"error",showCancelButton:!1,showConfirmButton:!0,showLearnmoreButton:!1,onConfirm:function(){location.reload()}})}})}},{key:"updateInit",value:function(t){var e=this,n=t,i=n.data("name"),o=n.data("slug");jupiterx_modal({title:jupiterx_cp_textdomain.update_plugin_checker_title,text:e.language(jupiterx_cp_textdomain.update_plugin_checker_progress,[i]),type:"warning",showCancelButton:!0,showCloseButton:!1,showLearnmoreButton:!1,showProgress:!0,showConfirmButton:!0,confirmButtonText:jupiterx_cp_textdomain.continue,progress:"100%",onConfirm:function(){jupiterx_modal({title:jupiterx_cp_textdomain.update_plugin,text:e.language(jupiterx_cp_textdomain.you_are_about_to_update,[i]),type:"warning",showCancelButton:!0,showConfirmButton:!0,confirmButtonText:jupiterx_cp_textdomain.continue,showCloseButton:!1,showLearnmoreButton:!1,showProgress:!1,closeOnOutsideClick:!1,onConfirm:function(){e.updateStart(n.data("slug"))}})}}),jupiterx_modal.disableConfirmBtn(),e.updateChecker(o)}},{key:"updateStart",value:function(t){var i=this,e=_.findWhere(i.pluginList.plugins,{slug:t}),n=d('.abb_plugin_update[data-slug="'+t+'"]');jupiterx_modal({title:jupiterx_cp_textdomain.updating_plugin,text:jupiterx_cp_textdomain.wait_for_plugin_update,type:"",showCancelButton:!1,showConfirmButton:!1,showCloseButton:!1,showLearnmoreButton:!1,progress:"100%",showProgress:!0,indefiniteProgress:!0}),d.ajax({type:"GET",url:_.unescape(e.update_url),success:function(){e.active&&e.url?d.get({url:_.unescape(e.url),success:function(t){jupiterx_modal({title:jupiterx_cp_textdomain.plugin_is_successfully_updated,text:i.language(jupiterx_cp_textdomain.plugin_updated_recent_version,[n.data("name")]),type:"success",showCancelButton:!1,showConfirmButton:!0,showCloseButton:!1,showLearnmoreButton:!1,showProgress:!1,closeOnOutsideClick:!1,onConfirm:function(){location.reload()}})},error:function(t,e,n){i.request_error_handling(t,e,n)}}):jupiterx_modal({title:jupiterx_cp_textdomain.plugin_is_successfully_updated,text:i.language(jupiterx_cp_textdomain.plugin_updated_recent_version,[n.data("name")]),type:"success",showCancelButton:!1,showConfirmButton:!0,showCloseButton:!1,showLearnmoreButton:!1,showProgress:!1,closeOnOutsideClick:!1,onConfirm:function(){location.reload()}}),n.closest(".jupiterx-cp-plugin-item").attr("data-update","no"),n.remove()},error:function(t){jupiterx_modal({title:jupiterx_cp_textdomain.something_went_wrong,text:_.last(t.debug),type:"error",showCancelButton:!1,showConfirmButton:!0,showLearnmoreButton:!1})}})}},{key:"updateChecker",value:function(t){function n(t,e){var n='<table class="jupiterx_update_plugin_conflicts_table">';return n+="<thead>",n+="<tr>",n+=_.map(t,function(t){return"<th><p>"+t+"</p></th>"}).join(""),n+="</tr>",n+="</thead>",n+="<tbody>",n+=_.map(e,function(t){return"<tr><td><p>"+t.name+"</p></td><td><p>"+t.min_version+"</p></td></tr>"}).join(""),n+="</tbody>",n+="</table>"}var e=_.findWhere(this.pluginList.plugins,{slug:t});d.ajax({type:"POST",url:_wpUtilSettings.ajax.url,data:{action:"abb_update_plugin_checker",plugin:e},success:function(){jupiterx_modal.enableConfirmBtn(),jupiterx_modal.hideProgressBar(),jupiterx_modal.update({desc:jupiterx_cp_textdomain.update_plugin_checker_no_conflict})},error:function(t){jupiterx_modal.enableConfirmBtn(),jupiterx_modal.hideProgressBar();var e=jupiterx_cp_textdomain.update_plugin_checker_warning;t.plugins&&0<t.plugins.length&&(e+=n([jupiterx_cp_textdomain.plugins,jupiterx_cp_textdomain.upgrade_to_version],t.plugins)),t.themes&&0<t.themes.length&&(e+=n([jupiterx_cp_textdomain.themes,jupiterx_cp_textdomain.upgrade_to_version],t.themes)),jupiterx_modal.update({desc:e})}})}},{key:"filtersInit",value:function(t){var e=t,n=e.data("filter");if("undefined"!=typeof localStorage&&localStorage.setItem("activeFilter",n),d(".jupiterx-cp-plugins-filter .btn").removeClass("btn-secondary").addClass("btn-outline-secondary"),e.removeClass("btn-outline-secondary").addClass("btn-secondary"),"all"!==n){if("update"===n)return d(".jupiterx-cp-plugin-item").show(),void d(".jupiterx-cp-plugin-item").not("[data-update=yes]").hide();d(".jupiterx-cp-plugin-item").show(),d(".jupiterx-cp-plugin-item").not("[data-filter="+n+"]").hide()}else d(".jupiterx-cp-plugin-item").show()}},{key:"request_error_handling",value:function(t){console.log(t),4===t.readyState?jupiterx_modal({title:jupiterx_cp_textdomain.something_went_wrong,text:t.status,type:"error",showCancelButton:!1,showConfirmButton:!0,showLearnmoreButton:!1}):0===t.readyState?jupiterx_modal({title:jupiterx_cp_textdomain.something_went_wrong,text:jupiterx_cp_textdomain.error_in_network_please_check_your_connection_and_try_again,type:"error",showCancelButton:!1,showConfirmButton:!0,showLearnmoreButton:!1}):jupiterx_modal({title:jupiterx_cp_textdomain.something_went_wrong,text:jupiterx_cp_textdomain.something_wierd_happened_please_try_again,type:"error",showCancelButton:!1,showConfirmButton:!0,showLearnmoreButton:!1})}},{key:"language",value:function(n,t){if(void 0!==n&&""!==n){var e=t.length;return e<1||(e===(n.match(/{param}/g)||[]).length?d.each(t,function(t,e){n=n.replace("{param}",e)}):console.log("Array len and indicator lengh is not same, Contact support with ID : (3-6H1T4I) .")),n}}}]),h);function h(){_classCallCheck(this,h),this.pluginList=[],this.init()}var v=(_createClass(j,[{key:"init",value:function(){var t=window.location.hash,e=t.substring(1,t.length),n=jupiterxControlPanel.initialSection;t&&e&&e!==n?this.goTo(e):n&&(this.sectionEvents(n),this.commonEvents())}},{key:"events",value:function(){var i=this;i.element.on("click",".jupiterx-cp-sidebar-link",function(t){t.preventDefault();var e=d(this).attr("href"),n=e.substring(1,e.length);window.location.hash=e,i.goTo(n)})}},{key:"goTo",value:function(e){var n=this,i=n.sidebar,o=n.panes;o.addClass("loading-pane"),d.ajax({type:"POST",url:_wpUtilSettings.ajax.url,data:{action:"jupiterx_cp_load_pane_action",slug:e},success:function(t){o.empty(),o.append(t.data),o.removeClass("loading-pane"),i.find(".jupiterx-is-active").removeClass("jupiterx-is-active"),i.find("[href=#"+e+"]").parent().addClass("jupiterx-is-active"),n.sectionEvents(e),n.commonEvents()}})}},{key:"sectionEvents",value:function(t){var e=this.sections;e[t]&&new e[t]}},{key:"commonEvents",value:function(){var i=this;d(".jupiterx-cpanel-link").on("click",function(t){t.preventDefault();var e=d(this).attr("href"),n=e.substring(1,e.length);window.location.hash=e,i.goTo(n)}),d(".jupiterx-pro-badge").tooltip({title:jupiterx_cp_textdomain.pro_badge_tooltip_title,trigger:"hover",container:".jupiterx-wrap",template:'\n          <div class="tooltip jupiterx-pro-badge-tooltip" role="tooltip">\n            <div class="arrow"></div>\n            <div class="tooltip-inner"></div>\n          </div>\n        '}),d('[data-toggle="popover"]').click(function(t){t.preventDefault()}),d('[data-toggle="popover"]').popover({trigger:"hover",container:".jupiterx.jupiterx-cp-wrap"}),d('[data-toggle="tooltip"]').tooltip()}}]),j);function j(t){var e=t.node;_classCallCheck(this,j),this.element=d(e),this.sidebar=this.element.find(".jupiterx-cp-sidebar"),this.panes=this.element.find(".jupiterx-cp-panes"),this.sections={home:n,settings:a,"install-templates":i,"system-status":r,"update-theme":l,"image-sizes":c,"export-import":x,"install-plugins":f},this.init(),this.events()}d(".jupiterx-cp-wrap").each(function(t,e){new v({node:e})})}(jQuery,jupiterx);